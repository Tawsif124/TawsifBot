<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <!-- ‡¶è‡¶á ‡¶≤‡¶æ‡¶á‡¶®‡¶ü‡¶æ ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏‡¶ø‡¶≠ ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ñ‡ßÅ‡¶¨ ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tawsif Chatbot</title>
    <!-- Tailwind CSS ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶Ø‡¶æ‡¶§‡ßá ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶π‡¶Ø‡¶º -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ‡¶´‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø Inter ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            
            /* ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶∞ ‡¶õ‡¶¨‡¶ø‡¶∞ URL ‡¶¶‡¶ø‡¶§‡ßá ‡¶π‡¶¨‡ßá */
            /* ‡¶§‡ßã‡¶∞ kola.jpg ‡¶õ‡¶¨‡¶ø‡¶ü‡¶æ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßá ‡¶∏‡ßá‡¶á ‡¶≤‡¶ø‡¶Ç‡¶ï‡¶ü‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶ø‡ßü‡ßá ‡¶¶‡ßá */
            background-image: url('kola.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            transition: background-image 0.5s ease; /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡¶ø‡¶∂‡¶® */
        }
        
        /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶ì‡¶≠‡¶æ‡¶∞‡¶≤‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá */
        .bg-overlay {
            background-color: rgba(0, 0, 0, 0.4);
        }

        /* ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶Æ‡¶ø‡¶®‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú ‡¶π‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® */
        /* ‡¶è‡¶á ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ü‡¶æ ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶¶‡¶ø‡ßü‡ßá toggled ‡¶π‡¶¨‡ßá */
        .menu-minimized #sidebar-menu {
            min-width: 4rem; /* ‡¶õ‡ßã‡¶ü ‡¶Æ‡ßá‡¶®‡ßÅ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• */
            width: 4rem;
        }
        .menu-minimized #chat-box {
            min-width: calc(100% - 4rem);
            width: calc(100% - 4rem);
        }

        /* Tawsif Chatbot ‡¶≤‡ßá‡¶ñ‡¶æ‡¶ü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ü‡¶æ‡¶á‡¶™‡¶∞‡¶æ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        .typewriter-text {
            overflow: hidden; /* ‡¶Ø‡¶æ‡¶§‡ßá ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶®‡¶æ ‡¶Ø‡¶æ‡ßü */
            border-right: .15em solid orange; /* ‡¶ü‡¶æ‡¶á‡¶™‡¶∞‡¶æ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶∏‡¶æ‡¶∞ */
            white-space: nowrap; /* ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶è‡¶ï ‡¶≤‡¶æ‡¶á‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
            animation: 
                typing 2.5s steps(20, end),
                blink-caret .75s step-end infinite;
            display: inline-block;
        }

        /* ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶è‡¶´‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶Æ */
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        /* ‡¶ï‡¶æ‡¶∞‡ßç‡¶∏‡¶æ‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶ø‡¶´‡ßç‡¶∞‡ßá‡¶Æ */
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange }
        }

        /* ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        .animated-btn {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .animated-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
        }

        /* ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶® ‡¶Æ‡ßá‡¶®‡ßÅ */
        #style-options {
            position: absolute;
            /* ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ï‡ßç‡¶∏‡ßá‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶Ø‡¶æ‡¶§‡ßá ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡ßç‡¶≤‡¶ï ‡¶®‡¶æ ‡¶ï‡¶∞‡ßá */
            top: 60px;
            right: 0;
            transform: translateX(0);
            z-index: 10;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">
    <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ï‡ßç‡¶∏ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Æ‡ßÇ‡¶≤ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
    <div id="main-container" class="flex flex-col md:flex-row items-center justify-center gap-6 w-11/12 max-w-6xl transition-all duration-300">
        <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶∏‡¶æ‡¶á‡¶°‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
        <div id="sidebar-menu" class="bg-white bg-opacity-90 backdrop-filter backdrop-blur-sm shadow-xl rounded-2xl w-full md:w-1/4 p-6 flex flex-col items-center space-y-4 h-[80vh] md:h-[60vh] transition-all duration-300">
            <!-- ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® -->
            <button id="menu-toggle-btn" class="self-end p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <svg id="menu-arrow-icon" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
            <div id="menu-content" class="w-full flex flex-col items-center space-y-4 transition-opacity duration-300">
                <h2 class="text-xl font-bold text-gray-800 border-b-2 border-indigo-600 pb-2 mb-2">‡¶Æ‡ßá‡¶®‡ßÅ</h2>
                <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡ßã‡¶§‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
                <button class="w-full py-4 px-6 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-full animated-btn">
                    <span class="text-2xl">üéµ</span> ‡¶ó‡¶æ‡¶®
                </button>
                <button class="w-full py-4 px-6 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-full animated-btn">
                    <span class="text-2xl">üéÆ</span> ‡¶ó‡ßá‡¶Æ
                </button>
                <button class="w-full py-4 px-6 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-full animated-btn">
                    <span class="text-2xl">üìñ</span> ‡¶™‡¶°‡¶º‡¶æ
                </button>
                 <!-- ‡¶®‡¶§‡ßÅ‡¶®: About ‡¶¨‡¶æ‡¶ü‡¶® -->
                <button id="about-btn" class="w-full py-4 px-6 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-full animated-btn">
                    <span class="text-2xl">‚ÑπÔ∏è</span> About
                </button>
                <!-- ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶ñ‡¶® ‡¶â‡¶™‡¶∞‡ßá, ‡¶§‡¶æ‡¶á ‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶∞‡¶ø‡ßü‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
            </div>
        </div>

        <!-- ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ï‡ßç‡¶∏‡¶ü‡¶ø ‡¶∏‡¶¨ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶Æ‡¶æ‡¶ù‡¶ñ‡¶æ‡¶®‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶•‡ßá ‡¶Æ‡¶æ‡¶®‡¶ø‡ßü‡ßá ‡¶®‡ßá‡¶¨‡ßá -->
        <div id="chat-box" class="relative bg-white bg-opacity-90 backdrop-filter backdrop-blur-sm shadow-xl rounded-2xl w-full md:w-3/4 p-6 flex flex-col h-[80vh] transition-all duration-300">
            <!-- ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® -->
            <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶è‡¶á div-‡¶è‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá -->
            <div class="border-b border-gray-200 pb-4 mb-4 flex justify-between items-center">
                <!-- Tawsif Chatbot ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
                <h1 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                    <span id="chat-title" class="typewriter-text"></span>
                    <!-- ‡¶®‡¶§‡ßÅ‡¶®: ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá -->
                    <button id="style-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white text-xs font-semibold py-1 px-2 rounded-full animated-btn">
                        ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
                    </button>
                </h1>
                <select id="language-select" class="rounded-full border border-gray-300 px-4 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    <option value="bn-BD">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                    <option value="en-US">English</option>
                    <option value="hi-IN">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                    <option value="es-ES">Espa√±ol</option>
                </select>
            </div>

            <!-- ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶è‡¶∞‡¶ø‡ßü‡¶æ -->
            <div id="chat-messages" class="flex-grow overflow-y-auto space-y-4 pr-2">
                <!-- ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú -->
                <div class="flex items-start gap-2.5">
                    <div class="flex flex-col w-full max-w-[320px] leading-1.5 p-4 border-gray-200 bg-gray-100 rounded-e-xl rounded-es-xl">
                        <p class="text-sm font-normal text-gray-900">I am From Tawsif Chatbot How can I help you today</p>
                    </div>
                </div>
                <!-- ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá -->
            </div>

            <!-- ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ -->
            <div id="loading-spinner" class="hidden text-center my-4">
                <svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </div>

            <!-- ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶∞‡ßç‡¶Æ -->
            <div class="mt-4">
                <form id="chat-form" class="flex gap-2">
                    <!-- ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏‡¶ü‡¶ø ‡¶∏‡¶¨ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶®‡ßá‡¶¨‡ßá -->
                    <input
                        type="text"
                        id="user-input"
                        class="flex-grow rounded-full border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                        placeholder="‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ..."
                        autocomplete="off"
                        required
                    />
                    <!-- ‡¶≠‡ßü‡ßá‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶æ‡¶ü‡¶® -->
                    <button
                        type="button"
                        id="voice-input-btn"
                        class="bg-green-500 hover:bg-green-600 text-white p-2 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500"
                    >
                        <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" d="M7 4a3 3 0 00-3 3v6a3 3 0 006 0V7a3 3 0 00-3-3zM3 7a5 5 0 0110 0v6a5 5 0 01-10 0V7zm4-4a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm0 14a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                    <button
                        type="submit"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-6 rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"
                    >
                        ‡¶™‡¶æ‡¶†‡¶æ‡¶ì
                    </button>
                </form>
            </div>
            
            <!-- ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
            <div id="style-options" class="hidden bg-white rounded-2xl p-6 shadow-xl space-y-4 max-w-xs w-full transition-all duration-300">
                <h3 class="text-lg font-bold text-gray-800">‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ö‡¶™‡¶∂‡¶®</h3>
                <!-- ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶Ö‡¶™‡¶∂‡¶® -->
                <div class="flex justify-between items-center">
                    <span class="text-sm font-medium text-gray-700">‡¶∞‡¶ô‡¶ø‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü</span>
                    <button id="text-color-toggle" class="relative inline-flex items-center h-6 rounded-full w-11 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" data-state="off">
                        <span class="sr-only">‡¶∞‡¶ô‡¶ø‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ö‡¶®/‡¶Ö‡¶´</span>
                        <span class="transform transition-transform duration-200 bg-gray-200 inline-block h-5 w-5 rounded-full" data-state="off"></span>
                    </button>
                </div>
                <!-- ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡¶∂‡¶® -->
                <div class="flex justify-between items-center">
                    <span class="text-sm font-medium text-gray-700">‡¶∞‡¶ô‡¶ø‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°</span>
                    <button id="bg-color-toggle" class="relative inline-flex items-center h-6 rounded-full w-11 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" data-state="off">
                        <span class="sr-only">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶Ö‡¶®/‡¶Ö‡¶´</span>
                        <span class="transform transition-transform duration-200 bg-gray-200 inline-block h-5 w-5 rounded-full" data-state="off"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‡¶ú‡¶æ‡¶≠‡¶æ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶ï‡ßã‡¶° ‡¶∂‡ßÅ‡¶∞‡ßÅ
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const chatMessages = document.getElementById('chat-messages');
        const loadingSpinner = document.getElementById('loading-spinner');
        const voiceInputBtn = document.getElementById('voice-input-btn');
        const languageSelect = document.getElementById('language-select');
        const menuToggleBtn = document.getElementById('menu-toggle-btn');
        const mainContainer = document.getElementById('main-container');
        const menuContent = document.getElementById('menu-content');
        const menuArrowIcon = document.getElementById('menu-arrow-icon');
        const chatTitle = document.getElementById('chat-title');
        const aboutBtn = document.getElementById('about-btn');

        // ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶æ‡¶ü‡¶®
        const styleBtn = document.getElementById('style-btn');
        const styleOptionsContainer = document.getElementById('style-options');
        const textColorToggle = document.getElementById('text-color-toggle');
        const bgColorToggle = document.getElementById('bg-color-toggle');
        const chatBox = document.getElementById('chat-box');
        const body = document.body;

        let wasVoiceInput = false; // ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
        
        // ‡¶∞‡¶ô‡¶ø‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞‡ßá‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá
        const textColors = ['#ef4444', '#f97316', '#eab308', '#22c55e', '#3b82f6', '#8b5cf6'];
        let isTextColored = false;
        let isBackgroundStyled = false;

        // ‡¶ü‡¶æ‡¶á‡¶™‡¶∞‡¶æ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶ï‡¶∞‡¶æ
        chatTitle.textContent = 'Tawsif Chatbot üí¨';

        // About ‡¶¨‡¶æ‡¶ü‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡¶ø‡¶∏‡ßá‡¶®‡¶æ‡¶∞
        aboutBtn.addEventListener('click', () => {
            // about.html ‡¶™‡ßá‡¶ú‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
            window.location.href = 'about.html';
        });

        // ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Ö‡¶™‡¶∂‡¶® ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶ï‡¶∞‡¶æ
        styleBtn.addEventListener('click', () => {
            styleOptionsContainer.classList.toggle('hidden');
        });

        // ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®
        textColorToggle.addEventListener('click', () => {
            isTextColored = !isTextColored;
            const state = textColorToggle.getAttribute('data-state');
            textColorToggle.setAttribute('data-state', isTextColored ? 'on' : 'off');
            const toggleSpan = textColorToggle.querySelector('span:last-child');
            if (isTextColored) {
                textColorToggle.classList.add('bg-green-500');
                textColorToggle.classList.remove('bg-gray-200');
                toggleSpan.classList.add('translate-x-5', 'bg-white');
                toggleSpan.classList.remove('bg-gray-200');
            } else {
                textColorToggle.classList.remove('bg-green-500');
                textColorToggle.classList.add('bg-gray-200');
                toggleSpan.classList.remove('translate-x-5', 'bg-white');
                toggleSpan.classList.add('bg-gray-200');
            }
        });

        // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶ü‡¶ó‡¶≤ ‡¶¨‡¶æ‡¶ü‡¶®
        bgColorToggle.addEventListener('click', () => {
            isBackgroundStyled = !isBackgroundStyled;
            const state = bgColorToggle.getAttribute('data-state');
            bgColorToggle.setAttribute('data-state', isBackgroundStyled ? 'on' : 'off');
            const toggleSpan = bgColorToggle.querySelector('span:last-child');
            if (isBackgroundStyled) {
                bgColorToggle.classList.add('bg-green-500');
                bgColorToggle.classList.remove('bg-gray-200');
                toggleSpan.classList.add('translate-x-5', 'bg-white');
                toggleSpan.classList.remove('bg-gray-200');
                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
                body.style.backgroundImage = 'linear-gradient(45deg, #a855f7, #6366f1)';
            } else {
                bgColorToggle.classList.remove('bg-green-500');
                bgColorToggle.classList.add('bg-gray-200');
                toggleSpan.classList.remove('translate-x-5', 'bg-white');
                toggleSpan.classList.add('bg-gray-200');
                // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶ó‡ßç‡¶∞‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶ì‡ßü‡¶æ
                body.style.backgroundImage = 'url("https://placehold.co/1000x800/2a2a2a/fff?text=kola.jpg")';
            }
        });

        // ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ü‡¶ó‡¶≤ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        menuToggleBtn.addEventListener('click', () => {
            // main-container-‡¶è 'menu-minimized' ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡¶ü‡¶ø toggled ‡¶π‡¶¨‡ßá
            mainContainer.classList.toggle('menu-minimized');
            
            // ‡¶Æ‡ßá‡¶®‡ßÅ‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü (‡¶¨‡¶æ‡¶ü‡¶®‡¶ó‡ßÅ‡¶≤‡ßã) ‡¶≤‡ßÅ‡¶ï‡¶ø‡ßü‡ßá ‡¶∞‡¶æ‡¶ñ‡¶æ ‡¶¨‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            const isMinimized = mainContainer.classList.contains('menu-minimized');
            menuContent.classList.toggle('hidden', isMinimized);

            // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßã‡¶∞ ‡¶¶‡¶ø‡¶ï ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            if (isMinimized) {
                menuArrowIcon.setAttribute('d', "M9 5l7 7-7 7"); // ‡¶°‡¶æ‡¶®‡¶Æ‡ßÅ‡¶ñ‡ßÄ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßã
            } else {
                menuArrowIcon.setAttribute('d', "M15 19l-7-7 7-7"); // ‡¶¨‡¶æ‡¶Æ‡¶Æ‡ßÅ‡¶ñ‡ßÄ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßã
            }
        });

        // ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶π‡¶ø‡¶∏‡ßç‡¶ü‡¶∞‡¶ø
        const chatHistory = [{
            role: "user",
            parts: [{ text: "‡¶π‡¶æ‡¶á! ‡¶§‡ßÅ‡¶á ‡¶ï‡ßá?" }]
        }];

        // API key ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¨‡¶∏‡¶æ‡¶§‡ßá ‡¶π‡¶¨‡ßá
        const apiKey = "AIzaSyBr5pug_OpHcoVccs0e6_tZB7GQPNVBf-E"; // Canvas ‡¶è‡¶®‡¶≠‡¶æ‡¶Ø‡¶º‡¶∞‡¶®‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶è‡¶á API ‡¶ï‡ßÄ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        // Speech Recognition API ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition;
        
        // ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶®‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø ‡¶ï‡¶∞‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶ö ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ
        function startSpeechRecognition() {
            if (SpeechRecognition) {
                recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.lang = languageSelect.value;

                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    userInput.value = transcript;
                    wasVoiceInput = true;
                    chatForm.dispatchEvent(new Event('submit'));
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                };

                recognition.onend = () => {
                    voiceInputBtn.innerHTML = `<svg class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7 4a3 3 0 00-3 3v6a3 3 0 006 0V7a3 3 0 00-3-3zM3 7a5 5 0 0110 0v6a5 5 0 01-10 0V7zm4-4a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm0 14a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z" clip-rule="evenodd" /></svg>`;
                };
            } else {
                console.warn('Speech Recognition is not supported by this browser.');
                voiceInputBtn.style.display = 'none';
            }
        }
        
        // ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶∏‡ßç‡¶™‡¶ø‡¶ö ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ
        startSpeechRecognition();

        // ‡¶≠‡ßü‡ßá‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá
        voiceInputBtn.addEventListener('click', () => {
            voiceInputBtn.innerHTML = `<svg class="h-6 w-6 animate-pulse" fill="red" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M7 4a3 3 0 00-3 3v6a3 3 0 006 0V7a3 3 0 00-3-3zM3 7a5 5 0 0110 0v6a5 5 0 01-10 0V7zm4-4a1 1 0 011 1v1a1 1 0 11-2 0V4a1 1 0 011-1zm0 14a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1z" clip-rule="evenodd" /></svg>`;
            if (recognition) {
                 recognition.start();
            }
        });

        // ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶π‡¶≤‡ßá ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶™‡ßç‡¶≤‡ßá‡¶∏‡¶π‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶ö ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ
        languageSelect.addEventListener('change', () => {
            const selectedLanguage = languageSelect.options[languageSelect.selectedIndex].value;
            const placeholders = {
                'bn-BD': '‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶ñ...',
                'en-US': 'Type your message...',
                'hi-IN': '‡§Ö‡§™‡§®‡§æ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§≤‡§ø‡§ñ‡•á‡§Ç...',
                'es-ES': 'Escribe tu mensaje...'
            };
            userInput.placeholder = placeholders[selectedLanguage];
            startSpeechRecognition(); // ‡¶®‡¶§‡ßÅ‡¶® ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶ø‡¶ï‡¶ó‡¶®‡¶ø‡¶∂‡¶® ‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡¶Ø‡¶º ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ
        });

        // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function displayMessage(message, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex gap-2.5 ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            messageDiv.innerHTML = `
                <div class="flex flex-col w-full max-w-[320px] leading-1.5 p-4 ${sender === 'user' ? 'bg-indigo-600 rounded-e-xl rounded-es-xl' : 'bg-gray-100 rounded-e-xl rounded-es-xl'}">
                    <p class="text-sm font-normal ${sender === 'user' ? 'text-white' : 'text-gray-900'}">${message}</p>
                </div>
            `;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶æ‡¶Æ‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶¨‡ßá
        }

        // ‡¶®‡¶§‡ßÅ‡¶®: HTML ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function displayHtmlMessage(htmlContent, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex gap-2.5 ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            const messageContentDiv = document.createElement('div');
            // ‡¶è‡¶á div-‡¶è ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶Ø‡¶æ‡¶§‡ßá HTML ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡ßü
            messageContentDiv.className = `flex flex-col w-full max-w-[320px] leading-1.5 p-4 ${sender === 'user' ? 'bg-indigo-600 rounded-e-xl rounded-es-xl' : 'bg-gray-100 rounded-e-xl rounded-es-xl'}`;
            messageContentDiv.innerHTML = htmlContent;
            messageDiv.appendChild(messageContentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight; // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶®‡¶ø‡¶ö‡ßá ‡¶®‡¶æ‡¶Æ‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡ßá‡¶¨‡ßá
        }


        // ‡¶®‡¶§‡ßÅ‡¶®: ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Æ‡¶ø‡¶Ç ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶ü‡¶æ‡¶á‡¶™‡¶∞‡¶æ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶è‡¶´‡ßá‡¶ï‡ßç‡¶ü)
        function displayStreamingMessage(message, sender) {
            // ‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶è‡¶ï‡¶ü‡¶ø ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex gap-2.5 ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            const messageContentDiv = document.createElement('div');
            messageContentDiv.className = `flex flex-col w-full max-w-[320px] leading-1.5 p-4 ${sender === 'user' ? 'bg-indigo-600 rounded-e-xl rounded-es-xl' : 'bg-gray-100 rounded-e-xl rounded-es-xl'}`;
            messageDiv.appendChild(messageContentDiv);
            chatMessages.appendChild(messageDiv);
            
            // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡¶ü‡¶ø‡¶ï‡ßá ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡¶æ
            const paragraphs = message.split('\n\n');
            let paraIndex = 0;

            function typeNextParagraph() {
                if (paraIndex < paragraphs.length) {
                    const paragraphText = paragraphs[paraIndex];
                    
                    // ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø <p> ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                    const paragraphElement = document.createElement('p');
                    let pClasses = `text-sm font-normal mb-2`;
                    // ‡¶Ø‡¶¶‡¶ø ‡¶∞‡¶ô‡¶ø‡¶® ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ö‡¶™‡¶∂‡¶® ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
                    if (isTextColored) {
                        const randomColor = textColors[Math.floor(Math.random() * textColors.length)];
                        paragraphElement.style.color = randomColor;
                    } else {
                        paragraphElement.style.color = sender === 'user' ? '#fff' : '#111827';
                    }
                    paragraphElement.className = pClasses;
                    messageContentDiv.appendChild(paragraphElement);

                    // ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡ßá‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞‡ßá‡¶∞ ‡¶∂‡¶¨‡ßç‡¶¶‡¶ó‡ßÅ‡¶≤‡ßã ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡¶æ
                    const words = paragraphText.split(' ');
                    let wordIndex = 0;
                    const typingSpeed = 50; // ‡¶ü‡¶æ‡¶á‡¶™‡¶ø‡¶Ç ‡¶ó‡¶§‡¶ø (‡¶Æ‡¶ø‡¶≤‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°)

                    function typeNextWord() {
                        if (wordIndex < words.length) {
                            // ‡¶∂‡¶¨‡ßç‡¶¶ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ
                            paragraphElement.textContent += (wordIndex > 0 ? ' ' : '') + words[wordIndex];
                            wordIndex++;
                            chatMessages.scrollTop = chatMessages.scrollHeight;
                            setTimeout(typeNextWord, typingSpeed);
                        } else {
                            // ‡¶è‡¶á ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∂‡ßá‡¶∑ ‡¶π‡¶≤‡ßá ‡¶™‡¶∞‡ßá‡¶∞ ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶ï‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶æ
                            paraIndex++;
                            typeNextParagraph();
                        }
                    }
                    typeNextWord();
                }
            }
            
            typeNextParagraph();
        }

        // ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function displayQuizzes(quizzesData) {
            quizzesData.forEach((quizData, index) => {
                const quizContainer = document.createElement('div');
                quizContainer.className = 'w-full max-w-[400px] bg-gray-100 rounded-2xl p-4 my-4 animate-fadeIn';
                quizContainer.innerHTML = `
                    <h3 class="text-base font-bold text-gray-900 mb-4">${index + 1}. ${quizData.question}</h3>
                    <div class="space-y-2" id="options-container-${index}"></div>
                `;
                
                const optionsContainer = quizContainer.querySelector(`#options-container-${index}`);
                
                quizData.options.forEach((option) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.textContent = option;
                    optionBtn.className = 'w-full text-left py-2 px-4 rounded-full transition-colors duration-200 border border-gray-300 text-gray-700 hover:bg-gray-200';
                    optionBtn.dataset.option = option;
                    
                    optionBtn.addEventListener('click', () => {
                        // ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá, ‡¶§‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ ‡¶∏‡¶∞‡¶æ‡¶ì
                        const allButtons = optionsContainer.querySelectorAll('button');
                        allButtons.forEach(btn => {
                            btn.classList.remove('bg-indigo-500', 'text-white', 'bg-green-500', 'bg-red-500', 'border-transparent');
                            btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                        });
                        
                        // ‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßã
                        optionBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                        optionBtn.classList.add('bg-indigo-500', 'text-white', 'border-transparent');

                        // ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
                        if (option === quizData.correctAnswer) {
                            setTimeout(() => {
                                optionBtn.classList.remove('bg-indigo-500');
                                optionBtn.classList.add('bg-green-500');
                            }, 500);
                        } else {
                            setTimeout(() => {
                                optionBtn.classList.remove('bg-indigo-500');
                                optionBtn.classList.add('bg-red-500');
                                // ‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï ‡¶ï‡¶∞‡¶æ
                                const correctBtn = optionsContainer.querySelector(`[data-option="${quizData.correctAnswer}"]`);
                                if(correctBtn) {
                                    correctBtn.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                                    correctBtn.classList.add('bg-green-500', 'text-white', 'border-transparent');
                                }
                            }, 500);
                        }
                    });
                    optionsContainer.appendChild(optionBtn);
                });
                chatMessages.appendChild(quizContainer);
            });
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Text-to-Speech (TTS) ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = languageSelect.value;
                window.speechSynthesis.speak(utterance);
            }
        }

        // ‡¶è‡¶Ü‡¶á ‡¶•‡ßá‡¶ï‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø API ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
        async function getGeminiResponse(userPrompt) {
            // ‡¶®‡¶§‡ßÅ‡¶®: ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶π‡¶æ‡¶∞‡ßç‡¶°‡¶ï‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶§‡¶•‡ßç‡¶Ø‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá
            const lowerPrompt = userPrompt.toLowerCase();
            
            // ‡¶®‡¶§‡ßÅ‡¶® ‡¶∂‡¶∞‡ßç‡¶§: ‡¶Ø‡¶¶‡¶ø 'Tawsif' ‡¶¨‡¶æ 'TAWSIF' ‡¶∂‡¶¨‡ßç‡¶¶‡¶ü‡¶ø ‡¶•‡¶æ‡¶ï‡ßá
            if (lowerPrompt.includes('tawsif')) {
                const htmlResponse = `
                    <div class="bg-indigo-100 text-indigo-800 p-4 rounded-xl shadow-md border border-indigo-200">
                        <p class="text-sm font-semibold mb-2">‡¶è‡¶á ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ü‡¶ü‡¶æ <span class="font-bold text-purple-700">Tawsif</span> ‡¶®‡¶ø‡¶ú‡ßá ‡¶π‡¶æ‡¶§‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá, Google Gemini API ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá! ‚ú®</p>
                        <p class="text-sm">‡¶ì ‡¶è‡¶ï‡¶ú‡¶® <span class="font-bold text-green-700">‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶õ‡ßá‡¶≤‡ßá</span> ‡¶è‡¶¨‡¶Ç <span class="font-bold text-blue-700">‡¶™‡ßç‡¶∞‡ßã‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ‡¶ø‡¶Ç</span> ‡¶ï‡¶∞‡¶§‡ßá ‡¶ñ‡ßÅ‡¶¨ ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡ßá‡•§</p>
                        <ul class="text-sm mt-3 list-disc list-inside">
                            <li>‡¶Ü‡¶¨‡ßç‡¶¨‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ: <span class="font-semibold text-gray-700">‡¶§‡¶æ‡¶´‡¶æ‡¶ú‡ßç‡¶ú‡¶≤ ‡¶ñ‡¶æ‡¶®</span></li>
                            <li>‡¶Ü‡¶Æ‡ßç‡¶Æ‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ: <span class="font-semibold text-gray-700">‡¶®‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶≤‡¶§‡¶æ‡¶®‡¶æ</span></li>
                            <li>‡¶¨‡ßã‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ: <span class="font-semibold text-gray-700">‡¶§‡ßç‡¶∞‡¶ø‡¶∂‡¶æ</span></li>
                        </ul>
                    </div>
                `;
                return { type: 'html', data: htmlResponse };
            }
            // ‡¶§‡ßã‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶Ø‡¶ñ‡¶® ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡ßá‡¶∏ ‡¶ï‡¶∞‡¶¨‡ßá
            if (lowerPrompt.includes('‡¶ï‡ßá ‡¶¨‡¶æ‡¶®‡¶ø‡ßü‡ßá‡¶õ‡ßá') || lowerPrompt.includes('‡¶ï‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá‡¶õ‡ßá') || lowerPrompt.includes('‡¶ï‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶õ‡¶ø‡¶∏') || lowerPrompt.includes('‡¶§‡ßã‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶Æ‡¶æ‡¶§‡¶æ ‡¶ï‡ßá')) {
                return { type: 'text', data: '‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá **Tawsif** ‡¶¨‡¶æ‡¶®‡¶ø‡ßü‡ßá‡¶õ‡ßá‡•§ üòÑ' };
            }
            // ‡¶§‡ßã‡¶∞ ‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶™‡¶æ‡¶∞‡ßá ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡ßá‡¶∏ ‡¶ï‡¶∞‡¶≤‡ßá
            if (lowerPrompt.includes('hsc') || lowerPrompt.includes('‡¶ï‡¶ø ‡¶™‡ßú‡¶ø‡¶∏') || lowerPrompt.includes('‡¶™‡ßú‡¶æ‡¶∂‡ßã‡¶®‡¶æ') || lowerPrompt.includes('‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡¶™‡¶∞‡ßç‡¶ï‡ßá') || lowerPrompt.includes('‡¶ï‡ßã‡¶® ‡¶ï‡ßç‡¶≤‡¶æ‡¶∏‡ßá ‡¶™‡ßú‡¶ø‡¶∏')) {
                return { type: 'text', data: '‡¶Ü‡¶Æ‡¶ø ‡¶è‡¶ñ‡¶® **HSC**-‡¶§‡ßá ‡¶™‡ßú‡¶ø‡•§' };
            }
            // ‡¶§‡ßã‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡ßá‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶™‡¶æ‡¶∞‡ßá ‡¶ú‡¶ø‡¶ú‡ßç‡¶û‡ßá‡¶∏ ‡¶ï‡¶∞‡¶≤‡ßá
            if (lowerPrompt.includes('‡¶Ü‡¶¨‡ßç‡¶¨‡ßÅ') || lowerPrompt.includes('‡¶Ü‡¶Æ‡ßç‡¶Æ‡ßÅ') || lowerPrompt.includes('‡¶¨‡¶æ‡¶¨‡¶æ') || lowerPrompt.includes('‡¶Æ‡¶æ') || lowerPrompt.includes('‡¶¨‡ßã‡¶®') || lowerPrompt.includes('sister') || lowerPrompt.includes('mother') || lowerPrompt.includes('father') || lowerPrompt.includes('‡¶™‡¶æ‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞')) {
                return { type: 'text', data: '‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶¨‡ßç‡¶¨‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ **‡¶§‡¶æ‡¶´‡¶æ‡¶ú‡ßç‡¶ú‡¶≤ ‡¶ñ‡¶æ‡¶®**, ‡¶Ü‡¶Æ‡ßç‡¶Æ‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ **‡¶®‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶∏‡ßÅ‡¶≤‡¶§‡¶æ‡¶®‡¶æ** ‡¶Ü‡¶∞ ‡¶¨‡ßã‡¶®‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ **‡¶§‡ßç‡¶∞‡¶ø‡¶∂‡¶æ**‡•§' };
            }


            let payload;
            const selectedLanguage = languageSelect.value;
            
            // ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ
            const numberMatch = userPrompt.match(/\d+/);
            let numberOfQuestions = numberMatch ? parseInt(numberMatch[0], 10) : 5; // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡ß´‡¶ü‡¶æ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®
            if (numberOfQuestions > 20) {
                numberOfQuestions = 20; // ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡ß®‡ß¶‡¶ü‡¶æ
            }

            // ‡¶Ø‡¶¶‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶ö‡¶æ‡ßü
            if (userPrompt.toLowerCase().includes('mcq') || userPrompt.toLowerCase().includes('‡¶ï‡ßÅ‡¶á‡¶ú') || userPrompt.toLowerCase().includes('‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®') || userPrompt.toLowerCase().includes('quiz') || userPrompt.toLowerCase().includes('question')) {
                // JSON schema ‡¶∏‡¶π payload ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
                payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: `"${userPrompt}"‡•§ ‡¶è‡¶á ‡¶¨‡¶ø‡¶∑‡ßü‡ßá‡¶∞ ‡¶â‡¶™‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶ø‡¶§ ‡¶≠‡¶æ‡¶∑‡¶æ‡ßü ${numberOfQuestions}‡¶ü‡¶ø ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶ø‡¶™‡¶≤ ‡¶ö‡¶Ø‡¶º‡ßá‡¶∏ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® (MCQ) ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßá ‡¶¶‡¶æ‡¶ì‡•§ ‡¶â‡¶§‡ßç‡¶§‡¶∞‡¶ó‡ßÅ‡¶≤‡ßã ‡¶è‡¶ï‡¶ü‡¶ø JSON ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá‡¶∞ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶¶‡¶ø‡¶ì ‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá "question", "options" (‡¶è‡¶ï‡¶ü‡¶ø ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∞‡ßá), ‡¶è‡¶¨‡¶Ç "correctAnswer" (‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶Ç) ‡¶•‡¶æ‡¶ï‡¶¨‡ßá‡•§` }]
                    }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "question": { "type": "STRING" },
                                    "options": { "type": "ARRAY", "items": { "type": "STRING" } },
                                    "correctAnswer": { "type": "STRING" }
                                }
                            }
                        }
                    }
                };
            } else {
                // ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü‡¶¨‡¶ü ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø payload
                // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶≠‡¶æ‡¶∑‡¶æ ‡¶Ü‡¶∞ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá
                let prompt;
                if (selectedLanguage === 'bn-BD') {
                    prompt = `"${userPrompt}"‡•§ ‡¶è‡¶á ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶§‡ßÅ‡¶á ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶§‡ßá ‡¶¶‡¶ø‡¶¨‡¶ø, ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡¶∞‡ßá, ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßá ‡¶è‡¶¨‡¶Ç ‡¶õ‡ßã‡¶ü ‡¶õ‡ßã‡¶ü ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶ó‡ßç‡¶∞‡¶æ‡¶´‡ßá ‡¶≠‡¶æ‡¶ó ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶¨‡¶ø‡•§`;
                } else if (selectedLanguage === 'en-US') {
                    prompt = `"${userPrompt}". Respond to this question in English in a friendly tone, using emojis and formatted in short paragraphs.`;
                } else if (selectedLanguage === 'hi-IN') {
                    prompt = `"${userPrompt}"‡•§ ‡§á‡§∏ ‡§∏‡§µ‡§æ‡§≤ ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§Ç, ‡§¶‡•ã‡§∏‡•ç‡§§‡§æ‡§®‡§æ ‡§≤‡§π‡§ú‡•á ‡§Æ‡•á‡§Ç, ‡§á‡§Æ‡•ã‡§ú‡•Ä ‡§ï‡§æ ‡§á‡§∏‡•ç‡§§‡•á‡§Æ‡§æ‡§≤ ‡§ï‡§∞‡§ï‡•á ‡§î‡§∞ ‡§õ‡•ã‡§ü‡•á ‡§™‡•à‡§∞‡§æ‡§ó‡•ç‡§∞‡§æ‡§´ ‡§Æ‡•á‡§Ç‡•§`;
                } else if (selectedLanguage === 'es-ES') {
                    prompt = `"${userPrompt}". Responde a esta pregunta en espa√±ol de forma amigable, usando emojis y con formato de p√°rrafos cortos.`;
                }
                
                payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: prompt }]
                    }]
                };
            }

            // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
            loadingSpinner.classList.remove('hidden');

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                
                // ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    const responseText = result.candidates[0].content.parts[0].text;
                    
                    // JSON ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡¶æ
                    if (userPrompt.toLowerCase().includes('mcq') || userPrompt.toLowerCase().includes('‡¶ï‡ßÅ‡¶á‡¶ú') || userPrompt.toLowerCase().includes('‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®') || userPrompt.toLowerCase().includes('quiz') || userPrompt.toLowerCase().includes('question')) {
                        try {
                            const quizzesData = JSON.parse(responseText);
                            if (Array.isArray(quizzesData)) {
                                return { type: 'quiz', data: quizzesData };
                            }
                        } catch (e) {
                            console.error("Failed to parse JSON for quiz:", e);
                            return { type: 'text', data: "‡¶¶‡ßÅ‡¶É‡¶ñ‡¶ø‡¶§, ‡¶ï‡ßÅ‡¶á‡¶ú ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶≤‡¶æ‡¶Æ ‡¶®‡¶æ‡•§ ‡¶Ö‡¶®‡ßç‡¶Ø ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶∏‡•§" };
                        }
                    }
                    
                    // ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
                    return { type: 'text', data: responseText };
                } else {
                    return { type: 'text', data: "‡¶Ü‡¶Æ‡¶ø ‡¶ï‡ßã‡¶®‡ßã ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø‡¶®‡¶ø‡•§"};
                }
            } catch (error) {
                console.error('Error fetching from Gemini API:', error);
                return { type: 'text', data: `‡¶Ü‡¶∞‡ßá, ‡¶è‡¶ï‡¶ü‡¶æ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá: ${error.message}` };
            } finally {
                // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶™‡¶ø‡¶®‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã
                loadingSpinner.classList.add('hidden');
            }
        }

        // ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶π‡¶≤‡ßá ‡¶è‡¶á ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶ü‡¶ø ‡¶ö‡¶≤‡¶¨‡ßá
        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userText = userInput.value.trim();
            if (userText === '') return;

            // ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ
            displayMessage(userText, 'user');

            // ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶ñ‡¶æ‡¶≤‡¶ø ‡¶ï‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡ßü‡¶æ
            userInput.value = '';

            // ‡¶è‡¶Ü‡¶á ‡¶•‡ßá‡¶ï‡ßá ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶æ
            const botResponse = await getGeminiResponse(userText);
            
            // ‡¶â‡¶§‡ßç‡¶§‡¶∞‡ßá‡¶∞ ‡¶ß‡¶∞‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ
            if (botResponse.type === 'quiz') {
                displayQuizzes(botResponse.data);
            } else if (botResponse.type === 'html') {
                displayHtmlMessage(botResponse.data, 'bot');
            } else {
                // ‡¶®‡¶§‡ßÅ‡¶®: ‡¶ü‡¶æ‡¶á‡¶™‡¶∞‡¶æ‡¶á‡¶ü‡¶æ‡¶∞ ‡¶è‡¶´‡ßá‡¶ï‡ßç‡¶ü ‡¶¶‡¶ø‡ßü‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶°‡¶ø‡¶∏‡¶™‡ßç‡¶≤‡ßá ‡¶ï‡¶∞‡¶æ
                displayStreamingMessage(botResponse.data, 'bot');

                // ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®: ‡¶Ø‡¶¶‡¶ø ‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶Ü‡¶∏‡ßá, ‡¶§‡¶¨‡ßá‡¶á ‡¶≠‡¶Ø‡¶º‡ßá‡¶∏ ‡¶Ü‡¶â‡¶ü‡¶™‡ßÅ‡¶ü ‡¶π‡¶¨‡ßá
                if (wasVoiceInput) {
                    speak(botResponse.data);
                }
            }

            // ‡¶≠‡ßá‡¶∞‡¶ø‡ßü‡ßá‡¶¨‡¶≤ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            wasVoiceInput = false;
        });
    </script>
</body>
</html>
